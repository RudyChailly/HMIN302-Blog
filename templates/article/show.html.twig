{% extends 'base.html.twig' %}

{% block title %}Article{% endblock %}

{% block body %}
<div class="container my-3">
    <h1> {{ article.title }} </h1>

    <div class="row">
        <div class="col-9">
            <img class="article-show-thumbnail" src="{{ asset('uploads/article/' ~ article.thumbnail ) }}" alt="..."/>
            <p class="bg-white p-3 text-justify article-content border border-top-0">
                {{ article.content }}
            </p>
        </div>
        <div class="col-3">
            <div class="text-center bg-white border border-bottom-0 p-3">
                <a href="#" class="font-weight-bold"> {{ article.category.name}}  </a>
                <div> <span class="font-weight-bold"> {{ article.published|date("d/m/Y") }} </span> | <span class="font-weight-bold"> {{ article.published|date("H:i") }} </span>  </div>
            </div>
            {{ include('user/preview.html.twig', {'user': article.author}) }}
            {% if app.user and app.user.id != article.author.id %}
            <div class="text-center pb-3 border bg-white border-top-0">
                {{ include('user/follow_button.html.twig', {'user': article.author}) }}
            </div>
            {% endif %}
            {% if app.user %}
            <div class="text-center py-3 border bg-white border">
                {% if article.author.id == app.user.id %}
                <a class="btn-pill btn-outline-primary" href="{{ path('article_edit', {'id': article.id}) }}">
                    Editer l'article
                </a>
                {% else %}
                    <button class="btn-pill btn-outline-danger"> Signaler l'article</button>
                {% endif %}
            </div>
            {% endif %}
        </div>
    </div>

    <div class="row">
        <div class="col-12">
            <h3 class="p-3 mb-0 border font-weight-bold bg-white"> Commentaires   <span class="font-weight-normal"> ({{ article.comments|length }}) </span> </h3>
        </div>
    </div>

    {{ include('comment/_form.html.twig') }}

    {% for comment in article.comments %}
        {{ include('comment/show.html.twig', {'comment': comment}) }}
    {% endfor %}

    {{ include('report/comment/_form.html.twig') }}


    <div>
        <h3>Report Article</h3>
        {{ include('report/_form.html.twig') }}
    </div>
</div>
{% endblock %}